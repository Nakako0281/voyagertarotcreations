# MicroCMS & SSGform 設定設計書

本ドキュメントは、Voyager Tarot Creations公式サイトで使用する外部サービス（MicroCMS, SSGform）の設定内容を記載しています。
アカウント作成後、以下の通りに設定を行ってください。

## 1. MicroCMS 設定

### 1-1. APIエンドポイント一覧

| エンドポイント | 説明 | データ形式 |
| :--- | :--- | :--- |
| `news` | お知らせ記事 | リスト形式 |
| `members` | スタッフ・プロフィール | リスト形式 |
| `courses` | 講座カテゴリ一覧 | リスト形式 |

---

### 1-2. スキーマ定義詳細

#### ① お知らせ (`news`)
*   **API名**: お知らせ
*   **エンドポイント**: `news`

| フィールドID | 表示名 | 種類 | 必須 | 備考 |
| :--- | :--- | :--- | :--- | :--- |
| `title` | タイトル | テキストフィールド | 〇 | |
| `content` | 内容 | リッチエディタ | 〇 | |
| `category` | カテゴリ | 選択リスト (または参照) | △ | 「お知らせ」「講座情報」「ブログ」など |
| `eyecatch` | アイキャッチ画像 | 画像 | △ | 一覧表示用 |

#### ② プロフィール (`members`)
*   **API名**: メンバー/スタッフ
*   **エンドポイント**: `members`

| フィールドID | 表示名 | 種類 | 必須 | 備考 |
| :--- | :--- | :--- | :--- | :--- |
| `name` | 名前 | テキストフィールド | 〇 | 例: 青木 咲羅 |
| `titleEn` | 英語表記 | テキストフィールド | △ | 例: Sakura Aoki |
| `role` | 役職/肩書き | テキストフィールド | 〇 | 例: 代表, 認定コーチ |
| `image` | プロフィール画像 | 画像 | 〇 | |
| `introduction` | 自己紹介文 | テキストエリア | 〇 | 改行を含めるためテキストエリア推奨 |
| `qualifications` | 資格・経歴 | テキストエリア (または繰り返し) | △ | 箇条書き用 |

#### ③ 講座カテゴリ (`courses`)
*   **API名**: 講座カテゴリ
*   **エンドポイント**: `courses` (リスト形式)

| フィールドID | 表示名 | 種類 | 必須 | 備考 |
| :--- | :--- | :--- | :--- | :--- |
| `title` | 講座カテゴリ名 | テキストフィールド | 〇 | 例: ボイジャータロット |
| `subTitle` | 英語サブタイトル | テキストフィールド | △ | 例: Voyager Tarot |
| `slug` | 識別ID (Slug) | テキストフィールド | 〇 | ページ内リンク用 (例: `tarot`) |
| `steps` | ステップ (繰り返し) | 繰り返しフィールド | △ | |
| └ `stepNumber` | ステップ番号 | 数値 | | 1, 2, 3... |
| └ `label` | ラベル | テキストフィールド | | リーダー認定、コーチ認定... |
| `cards` | 講座カード (繰り返し) | 繰り返しフィールド | △ | |
| └ `title` | 講座名 | テキストフィールド | | |
| └ `image` | 画像 | 画像 | | |
| └ `url` | リンクURL | テキストフィールド | | |

> **備考**: `courses` は構造が複雑なため、最初はMicroCMSを使わずコード内の固定データで運用することも可能です（`src/pages/course.astro` 内）。

---

## 2. SSGform 設定

### 2-1. フォーム作成

SSGform管理画面にて「新しいフォーム」を作成してください。

*   **フォーム名**: 「お問い合わせフォーム」など任意の名前
*   **転送先メールアドレス**: お問い合わせを受け取りたいメールアドレス
*   **非同期通信(Ajax)を有効にする**: **OFF** (またはデフォルト)
    *   ※Astroの場合は通常のPOST送信で問題ありませんが、UX向上のため非同期化する場合も対応可能です。現在は同期送信（画面遷移あり）で実装しています。
*   **サンクスページURL**: `https://[あなたのドキュメントルート]/contact/thanks`
    *   公開後のURLを入力してください。
    *   ローカル開発中は設定しなくても送信テストは可能です。

### 2-2. コードへの反映

発行された **フォームのURL (Action URL)** を、以下のファイルに設定してください。

**対象ファイル**: `src/pages/contact.astro`

```html
<!-- 変更前 -->
<form action="YOUR_SSGFORM_URL" ...>

<!-- 変更後の例 -->
<form action="https://ssgform.com/s/AbCdEfGhIjKl" ...>
```

---

## 3. freee予約 (Reservia) 設定

### 3-1. リンク先URLの設定

ご自身のfreee予約サイト（Reservia）のトップページ、または特定の予約メニューページのURLを取得し、以下のコードに反映してください。

**① 講座申し込みボタン** (`src/pages/course.astro`)
```html
<a href="https://reservia.jp/shop/reserve/..." ...>
```

**② お問い合わせページの予約リンク** (`src/pages/contact.astro`)
```html
<a href="https://reservia.jp/shop/reserve/..." ...>
```
