---
import Layout from "../layouts/Layout.astro";
import TarotDraw from "../components/react/TarotDraw.tsx";
import { getNews } from "../library/microcms";
import { format } from "date-fns";

const response = await getNews({
	limit: 3,
	fields: ["id", "title", "publishedAt", "category", "eyecatch"],
});
const { contents: newsList } = response;

function formatDate(dateString: string) {
	return format(new Date(dateString), "yyyy.MM.dd");
}
// const newsList: any[] = [];
---

<Layout title="Home" wide={true}>
	<!-- Hero Section (Immersive Full Screen) -->
	<section
		class="relative h-screen w-full flex items-center justify-center overflow-hidden"
	>
		<!-- Background Image Slideshow -->
		<div class="absolute inset-0 z-0">
			<div
				class="absolute inset-0 bg-tarot-blue/30 z-10 pointer-events-none"
			>
			</div>
			<!-- Overlay -->

			<img
				src="/images/title_1.png"
				alt="Hero Background 1"
				class="absolute inset-0 w-full h-full object-cover transition-opacity duration-[2000ms] ease-in-out opacity-100"
				id="hero-bg-1"
			/>
			<img
				src="/images/title_2.png"
				alt="Hero Background 2"
				class="absolute inset-0 w-full h-full object-cover transition-opacity duration-[2000ms] ease-in-out opacity-0"
				id="hero-bg-2"
			/>
		</div>

		<script>
			// Simple crossfade for hero images
			const bg1 = document.getElementById("hero-bg-1");
			const bg2 = document.getElementById("hero-bg-2");

			if (bg1 && bg2) {
				setInterval(() => {
					bg1.classList.toggle("opacity-0");
					bg1.classList.toggle("opacity-100");
					bg2.classList.toggle("opacity-100");
					bg2.classList.toggle("opacity-0");
				}, 5000);
			}
		</script>

		<!-- Hero Content -->
		<div class="relative z-20 text-center text-white px-4">
			<h1
				class="text-6xl md:text-8xl font-mincho font-bold mb-6 tracking-wide drop-shadow-lg leading-tight animate-fade-in-up delay-100"
			>
				Voyager Tarot<br />
				<span class="text-gold-light">Creations</span>
			</h1>

			<p
				class="text-lg md:text-2xl font-mincho tracking-widest opacity-90 mb-12 animate-fade-in-up delay-200"
			>
				未来を創造する力を、あなたに。
			</p>

			<div
				class="flex flex-col sm:flex-row justify-center gap-6 animate-fade-in-up delay-300"
			>
				<a
					href="#tarot-draw"
					class="bg-white/10 backdrop-blur-md border border-white/50 text-white px-10 py-4 rounded-full hover:bg-white hover:text-tarot-blue transition-all duration-300 font-bold tracking-wide"
				>
					今日の1枚を引く
				</a>
			</div>
		</div>
	</section>

	<!-- Content Wrapper with white background to slide over fixed BG if we wanted, or just standard flow -->
	<div class="bg-bg-base relative z-10">
		<!-- News Section -->
		<section class="mb-32 max-w-7xl mx-auto px-4">
			<div class="flex items-center justify-between mb-12">
				<h2
					class="text-4xl font-mincho text-tarot-blue flex items-center gap-6"
				>
					<span class="w-16 h-[1px] bg-tarot-blue/30"></span>
					News
				</h2>
				<a
					href="/news"
					class="group flex items-center gap-3 text-sm text-text-muted hover:text-sakura-vivid transition-colors font-bold tracking-widest"
				>
					VIEW ALL
					<span
						class="w-8 h-8 rounded-full bg-white border border-gray-100 flex items-center justify-center group-hover:bg-sakura-vivid group-hover:border-sakura-vivid group-hover:text-white transition-all shadow-sm"
						>&rarr;</span
					>
				</a>
			</div>
			<div class="grid gap-10 md:grid-cols-3">
				{
					newsList.map((news) => (
						<a
							href={`/news/${news.id}`}
							class="block bg-card rounded-2xl shadow-sm border border-gray-100 hover:shadow-xl hover:shadow-pink-100/50 hover:-translate-y-2 transition-all duration-500 group overflow-hidden relative"
						>
							<div class="absolute inset-0 bg-gradient-to-br from-white via-transparent to-sakura-light/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500" />
							<div class="h-56 bg-gray-50 mb-0 overflow-hidden relative">
								{news.eyecatch ? (
									<img
										src={news.eyecatch.url}
										alt={news.title}
										class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-700"
									/>
								) : (
									<div class="w-full h-full flex items-center justify-center bg-gray-50 text-gray-300">
										<span class="text-sm tracking-widest">
											Voyager
										</span>
									</div>
								)}
								<div class="absolute top-4 left-4">
									<span class="bg-white/90 backdrop-blur text-xs text-tarot-dark font-bold px-3 py-1 rounded-full shadow-sm">
										{news.category[0]?.name}
									</span>
								</div>
							</div>
							<div class="p-8 relative z-10">
								<time class="text-xs text-gray-400 font-bold tracking-wider block mb-3">
									{formatDate(news.publishedAt)}
								</time>
								<h3 class="font-bold text-lg line-clamp-2 text-text-main group-hover:text-tarot-blue transition-colors leading-relaxed mb-4">
									{news.title}
								</h3>
								<div class="flex justify-end">
									<span class="text-sakura-vivid text-sm font-bold opacity-0 group-hover:opacity-100 transform translate-x-[-10px] group-hover:translate-x-0 transition-all duration-300">
										Read More &rarr;
									</span>
								</div>
							</div>
						</a>
					))
				}
			</div>
		</section>

		<!-- About Section (Who We Are & Mission) -->
		<section class="mb-32 px-4 relative">
			<div class="max-w-4xl mx-auto text-center mb-20">
				<span
					class="text-gold-main font-bold tracking-widest text-sm mb-2 block"
					>OUR IDENTITY</span
				>
				<h2 class="text-4xl font-mincho text-tarot-blue mb-8">
					WHO WE ARE
				</h2>
				<h3 class="text-xl font-bold mb-6 text-text-main">
					ボイジャータロットクリエイションズについて
				</h3>
				<p class="leading-[2.5] text-gray-600 mb-10 font-mincho">
					認定ティーチャーとして10年以上の経験を持つ青木咲羅が、<br
						class="hidden md:inline"
					/>
					ボイジャータロットの作者、ジェームズ・ワンレスの源流を受け継ぎ、<br
						class="hidden md:inline"
					/>
					魅力的で実力あるリーダー、コーチ、ティーチャーの育成を目指して新たに設立した団体です。
				</p>

				<div class="mb-16">
					<img
						src="/images/top_1.jpg"
						alt="Who We Are"
						class="w-full h-auto rounded-xl shadow-lg"
					/>
				</div>

				<!-- Course Section -->
				<div class="mb-32 mt-24">
					<div class="text-center mb-12">
						<span
							class="text-gold-main font-bold tracking-widest text-sm mb-2 block"
							>COURSE</span
						>
						<h2 class="text-4xl font-mincho text-tarot-blue">
							講座紹介
						</h2>
					</div>

					<div class="mb-12 flex justify-center">
						<div class="mb-12">
							<div
								class="flex flex-col md:flex-row justify-center items-center gap-6 text-tarot-blue font-bold font-mincho relative z-10"
							>
								<div
									class="bg-white/70 backdrop-blur px-8 py-4 rounded-full border border-white shadow-sm flex items-center gap-3"
								>
									<span
										class="w-6 h-6 bg-sakura-vivid text-white rounded-full flex items-center justify-center text-xs font-sans"
										>1</span
									>
									リーダー認定
								</div>

								<div class="hidden md:flex text-gray-300">
									<svg
										xmlns="http://www.w3.org/2000/svg"
										width="24"
										height="24"
										viewBox="0 0 24 24"
										fill="none"
										stroke="currentColor"
										stroke-width="2"
										stroke-linecap="round"
										stroke-linejoin="round"
										><path d="M5 12h14"></path><path
											d="m12 5 7 7-7 7"></path></svg
									>
								</div>
								<div class="md:hidden text-gray-300">
									<svg
										xmlns="http://www.w3.org/2000/svg"
										width="24"
										height="24"
										viewBox="0 0 24 24"
										fill="none"
										stroke="currentColor"
										stroke-width="2"
										stroke-linecap="round"
										stroke-linejoin="round"
										><path d="M12 5v14"></path><path
											d="m19 12-7 7-7-7"></path></svg
									>
								</div>

								<div
									class="bg-white/70 backdrop-blur px-8 py-4 rounded-full border border-white shadow-sm flex items-center gap-3"
								>
									<span
										class="w-6 h-6 bg-sakura-vivid text-white rounded-full flex items-center justify-center text-xs font-sans"
										>2</span
									>
									コーチ認定
								</div>

								<div class="hidden md:flex text-gray-300">
									<svg
										xmlns="http://www.w3.org/2000/svg"
										width="24"
										height="24"
										viewBox="0 0 24 24"
										fill="none"
										stroke="currentColor"
										stroke-width="2"
										stroke-linecap="round"
										stroke-linejoin="round"
										><path d="M5 12h14"></path><path
											d="m12 5 7 7-7 7"></path></svg
									>
								</div>
								<div class="md:hidden text-gray-300">
									<svg
										xmlns="http://www.w3.org/2000/svg"
										width="24"
										height="24"
										viewBox="0 0 24 24"
										fill="none"
										stroke="currentColor"
										stroke-width="2"
										stroke-linecap="round"
										stroke-linejoin="round"
										><path d="M12 5v14"></path><path
											d="m19 12-7 7-7 7"></path></svg
									>
								</div>

								<div
									class="bg-white/70 backdrop-blur px-8 py-4 rounded-full border border-white shadow-sm flex items-center gap-3"
								>
									<span
										class="w-6 h-6 bg-sakura-vivid text-white rounded-full flex items-center justify-center text-xs font-sans"
										>3</span
									>
									ティーチャー認定
								</div>
							</div>
						</div>
					</div>

					<div class="grid md:grid-cols-3 gap-8">
						<a href="/course#course_1" class="group block">
							<div
								class="overflow-hidden rounded-2xl mb-4 shadow-lg border border-white/50"
							>
								<img
									src="/images/top_2-1.jpg"
									alt="リーダー認定講座"
									class="w-full h-auto group-hover:scale-110 transition-transform duration-500"
								/>
							</div>
							<h3
								class="font-bold text-center text-lg text-tarot-blue group-hover:text-sakura-vivid transition-colors"
							>
								リーダー認定講座
							</h3>
							<div
								class="text-center text-sm text-gray-500 mt-2 flex justify-center items-center gap-1"
							>
								詳細はこちら <img
									src="/images/link_icon.svg"
									alt=""
									class="w-4 h-4 inline"
								/>
							</div>
						</a>
						<a href="/course#course_2" class="group block">
							<div
								class="overflow-hidden rounded-2xl mb-4 shadow-lg border border-white/50"
							>
								<img
									src="/images/top_2-2.jpg"
									alt="コーチ認定講座"
									class="w-full h-auto group-hover:scale-110 transition-transform duration-500"
								/>
							</div>
							<h3
								class="font-bold text-center text-lg text-tarot-blue group-hover:text-sakura-vivid transition-colors"
							>
								コーチ認定講座
							</h3>
							<div
								class="text-center text-sm text-gray-500 mt-2 flex justify-center items-center gap-1"
							>
								詳細はこちら <img
									src="/images/link_icon.svg"
									alt=""
									class="w-4 h-4 inline"
								/>
							</div>
						</a>
						<a href="/course2#course_1" class="group block">
							<div
								class="overflow-hidden rounded-2xl mb-4 shadow-lg border border-white/50"
							>
								<img
									src="/images/top_2-3.jpg"
									alt="ティーチャー認定講座"
									class="w-full h-auto group-hover:scale-110 transition-transform duration-500"
								/>
							</div>
							<h3
								class="font-bold text-center text-lg text-tarot-blue group-hover:text-sakura-vivid transition-colors"
							>
								ティーチャー認定講座
							</h3>
							<div
								class="text-center text-sm text-gray-500 mt-2 flex justify-center items-center gap-1"
							>
								詳細はこちら <img
									src="/images/link_icon.svg"
									alt=""
									class="w-4 h-4 inline"
								/>
							</div>
						</a>
					</div>
				</div>

				<div class="mb-24">
					<div class="text-center mb-8">
						<span
							class="text-gold-main font-bold tracking-widest text-sm mb-2 block"
							>OUR MISSION</span
						>
						<h2 class="text-4xl font-mincho text-tarot-blue mb-6">
							ボイジャータロットクリエイションズの使命
						</h2>
						<div class="flex justify-center mb-8">
							<h3
								class="text-2xl md:text-3xl font-mincho text-tarot-blue/80 tracking-widest font-bold border-b-2 border-gold-light pb-2"
							>
								未来を創造する力を、あなたに。
							</h3>
						</div>
						<p
							class="leading-[2.5] text-gray-700 font-mincho text-lg"
						>
							ボイジャータロットを通じて、皆さまの成長と可能性を広げること。<br
							/>
							創造性・成長・実現化をテーマに、魅力的、かつ実力あるボイジャータロットリーダー、<br
							/>
							コーチ、ティーチャーの育成に取り組んでまいります。
						</p>
					</div>

					<div class="grid grid-cols-2 gap-4 md:gap-8">
						<img
							src="/images/top_3_bottom_photos_item-1.jpg"
							alt="Mission Photo 1"
							class="rounded-2xl shadow-lg w-full h-auto hover:scale-[1.02] transition-transform duration-500"
						/>
						<img
							src="/images/top_3_bottom_photos_item-2.jpg"
							alt="Mission Photo 2"
							class="rounded-2xl shadow-lg w-full h-auto hover:scale-[1.02] transition-transform duration-500"
						/>
					</div>
				</div>
			</div>

			<div
				class="grid md:grid-cols-2 gap-16 items-center bg-white/60 backdrop-blur-3xl p-10 md:p-16 rounded-3xl shadow-sm border border-white"
			>
				<div class="order-2 md:order-1">
					<span
						class="text-sakura-vivid font-bold tracking-widest text-sm mb-2 block"
						>ABOUT CARD</span
					>
					<h2 class="text-3xl font-mincho text-tarot-blue mb-6">
						Voyager Tarot
					</h2>
					<h3 class="font-bold text-gray-700 mb-6 text-lg">
						「自分の人生を創造するためのツール」
					</h3>
					<p class="leading-loose text-gray-600 mb-10">
						従来の「占い」という枠を超え、現代の心理学や宇宙論を融合。<br
						/>
						78枚のカードには美しいコラージュが描かれ、スピリチュアルなエネルギーと現実的なメッセージが詰まっています。
					</p>

					<div class="space-y-6">
						<div class="flex gap-5 items-start group">
							<span
								class="flex-shrink-0 w-10 h-10 rounded-full bg-blue-50 text-tarot-blue flex items-center justify-center font-bold text-lg group-hover:bg-tarot-blue group-hover:text-white transition-colors"
								>01</span
							>
							<div>
								<h4
									class="font-bold text-gray-800 text-lg mb-1"
								>
									現実創造のサポート
								</h4>
								<p class="text-sm text-gray-600">
									カードのメッセージを通じて行動を促し、目標達成へと導きます。
								</p>
							</div>
						</div>
						<div class="flex gap-5 items-start group">
							<span
								class="flex-shrink-0 w-10 h-10 rounded-full bg-pink-50 text-sakura-vivid flex items-center justify-center font-bold text-lg group-hover:bg-sakura-vivid group-hover:text-white transition-colors"
								>02</span
							>
							<div>
								<h4
									class="font-bold text-gray-800 text-lg mb-1"
								>
									コーチングに最適なツール
								</h4>
								<p class="text-sm text-gray-600">
									スピリチュアルな視点と現実的なアプローチが融合しており、自己発見や成長を強力にサポートします。
								</p>
							</div>
						</div>
						<div class="flex gap-5 items-start group">
							<span
								class="flex-shrink-0 w-10 h-10 rounded-full bg-yellow-50 text-gold-main flex items-center justify-center font-bold text-lg group-hover:bg-gold-main group-hover:text-white transition-colors"
								>03</span
							>
							<div>
								<h4
									class="font-bold text-gray-800 text-lg mb-1"
								>
									直感を引き出すデザイン
								</h4>
								<p class="text-sm text-gray-600">
									美しいビジュアルが潜在意識を刺激し、新しい気づきをもたらします。
								</p>
							</div>
						</div>
					</div>

					<div class="mt-12">
						<a
							href="/about"
							class="inline-flex items-center gap-2 text-sakura-vivid font-bold hover:gap-4 transition-all"
							>もっと詳しく見る <span class="text-xl">&rarr;</span
							></a
						>
					</div>
				</div>
				<div
					class="order-1 md:order-2 h-[500px] bg-gray-100 rounded-[2rem] overflow-hidden relative shadow-lg shadow-pink-100/50"
				>
					<!-- Image placeholder with glass overlay -->
					<div
						class="absolute inset-0 bg-gradient-to-br from-tarot-blue/5 to-sakura-vivid/5 flex items-center justify-center text-gray-400"
					>
						<span class="text-sm tracking-widest"
							>Voyager Image</span
						>
					</div>
				</div>
			</div>
		</section>

		<!-- Change Section -->
		<section class="mb-32 px-4 max-w-6xl mx-auto">
			<div class="text-center mb-12">
				<span
					class="text-gold-main font-bold tracking-widest text-sm mb-2 block"
					>CHANGE</span
				>
				<h2 class="text-3xl font-mincho text-tarot-blue">
					ボイジャータロットがもたらす変化
				</h2>
			</div>

			<div class="mb-12 text-center text-gray-600 font-mincho">
				<p>
					ボイジャータロットを使うことで、人生に次のような変化が訪れます
				</p>
			</div>

			<div
				class="bg-white/80 backdrop-blur rounded-3xl shadow-glass border border-white p-6 md:p-12"
			>
				<div class="flex flex-col md:flex-row gap-12 items-center">
					<div class="md:w-1/2">
						<img
							src="/images/top_5.jpg"
							alt="Change"
							class="rounded-2xl shadow-xl w-full h-auto"
						/>
					</div>
					<div class="md:w-1/2">
						<ul class="space-y-8">
							<li class="flex flex-col gap-2">
								<h3
									class="font-bold text-xl text-tarot-blue border-b border-sakura-light/50 pb-2 inline-block"
								>
									内面のクリアリング
								</h3>
								<p class="text-gray-600 leading-relaxed">
									自分の本音を知り、迷いや不安を解消。
								</p>
							</li>
							<li class="flex flex-col gap-2">
								<h3
									class="font-bold text-xl text-tarot-blue border-b border-sakura-light/50 pb-2 inline-block"
								>
									具体的な行動へのヒント
								</h3>
								<p class="text-gray-600 leading-relaxed">
									次の一歩が明確になり、行動するモチベーションが高まります。
								</p>
							</li>
							<li class="flex flex-col gap-2">
								<h3
									class="font-bold text-xl text-tarot-blue border-b border-sakura-light/50 pb-2 inline-block"
								>
									意識の拡大
								</h3>
								<p class="text-gray-600 leading-relaxed">
									直感を刺激され、新しい視点に気づけるようになります。
								</p>
							</li>
							<li class="flex flex-col gap-2">
								<h3
									class="font-bold text-xl text-tarot-blue border-b border-sakura-light/50 pb-2 inline-block"
								>
									現実創造の加速
								</h3>
								<p class="text-gray-600 leading-relaxed">
									行動が変わることで、目標達成や自己実現がスピーディに進みます。
								</p>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</section>

		<!-- Tarot Draw Feature -->
		<section
			id="tarot-draw"
			class="mb-20 py-16 px-4 bg-gradient-to-br from-tarot-blue to-indigo-900 text-white rounded-3xl text-center relative overflow-hidden shadow-2xl shadow-indigo-200"
		>
			<div class="relative z-10">
				<h2 class="text-3xl font-mincho mb-8">Today's Voyager</h2>
				<p class="mb-8 opacity-90">
					今のあなたに必要なメッセージを受け取りましょう。
				</p>

				<TarotDraw client:visible />
			</div>
			<!-- Decorative bg elements -->
			<div
				class="absolute top-0 left-0 w-full h-full bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-white/10 to-transparent opacity-30"
			>
			</div>
		</section>
	</div>
</Layout>
